% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/speed.R
\name{speed}
\alias{speed}
\title{Optimize Experimental Design Layout Using Simulated Annealing}
\usage{
speed(
  data,
  permute,
  swap_within = ~1,
  spatial_factors = ~row + col,
  iterations = 10000,
  early_stop_iterations = 2000,
  quiet = FALSE,
  seed = NULL,
  swap_count = 1,
  swap_all_blocks = FALSE,
  adaptive_swaps = FALSE,
  start_temp = 100,
  cooling_rate = 0.99,
  adj_weight = 1,
  bal_weight = 1
)
}
\arguments{
\item{data}{A data frame containing the initial design layout with row and col coordinates}

\item{permute}{A one-sided formula specifying the treatment variable to be permuted (e.g., ~treatment)}

\item{swap_within}{A one-sided formula specifying the blocking factor within which to permute treatments (default: ~1)}

\item{spatial_factors}{A one-sided formula specifying spatial factors to consider for balance (default: ~row + col)}

\item{iterations}{Maximum number of iterations for the simulated annealing algorithm (default: 10000)}

\item{early_stop_iterations}{Number of iterations without improvement before early stopping (default: 2000)}

\item{quiet}{Logical; if TRUE, suppresses progress messages (default: FALSE)}

\item{seed}{A numeric value for random seed. If provided, it ensures reproducibility of results (default: NULL).}

\item{swap_count}{Number of treatment swaps per iteration (default: 1)}

\item{swap_all_blocks}{Logical; if TRUE, performs swaps in all blocks at each iteration (default: FALSE)}

\item{adaptive_swaps}{Logical; if TRUE, adjusts swap parameters based on temperature (default: FALSE)}

\item{start_temp}{Starting temperature for simulated annealing (default: 100)}

\item{cooling_rate}{Rate at which temperature decreases (default: 0.99)}

\item{adj_weight}{Weight given to adjacency score in objective function (default: 1)}

\item{bal_weight}{Weight given to balance score in objective function (default: 1)}
}
\value{
A list containing:
\itemize{
\item design - Matrix of optimized treatment layout
\item design_df - Data frame of optimized design
\item score - Final optimization score
\item adjacency_score - Score for treatment adjacencies
\item balance_score - Score for spatial balance
\item scores - Vector of scores across iterations
\item temperatures - Vector of temperatures across iterations
\item iterations_run - Total number of iterations performed
\item stopped_early - Logical indicating if optimization stopped early
\item treatments - Vector of unique treatments
\item seed - Random seed used for reproducibility of the design. If not set in the function, the seed is set to the second element of .Random.seed.
}
}
\description{
Optimizes the spatial layout of experimental designs using simulated annealing to minimize
treatment adjacency and maintain treatment balance across spatial factors.
}
\examples{
# Create a simple design with 3 replicates of 4 treatments in a 4x3 layout
df <- data.frame(
  row = rep(1:4, each = 3),
  col = rep(1:3, times = 4),
  Treatment = rep(LETTERS[1:4], 3)
)

# Optimize the design
result <- speed(df, permute = ~Treatment)

}
