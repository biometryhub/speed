% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/speed_df.R
\name{speed_df}
\alias{speed_df}
\title{Optimize Experimental Design Layout Using Simulated Annealing}
\usage{
speed_df(
  data,
  swap,
  swap_within = "1",
  spatial_factors = ~row + col,
  adjacency_method = "coordinate",
  adjacency_threshold = 1.5,
  iterations = 10000,
  early_stop_iterations = 2000,
  obj_function = objective_function(),
  quiet = FALSE,
  seed = NULL
)
}
\arguments{
\item{data}{A data frame containing the experimental design with spatial coordinates}

\item{swap}{A column name of the treatment to be swapped (e.g., \code{treatment})}

\item{swap_within}{A string specifying the blocking variable that is a boundary within which to swap
treatments. Specify \code{"1"} or \code{"none"} for no boundary (default: \code{"1"})}

\item{spatial_factors}{A one-sided formula specifying spatial factors to consider for balance (default:
\code{~row + col})}

\item{adjacency_method}{Method to determine adjacent plots: "coordinate" uses Euclidean distance,
"cardinal" uses only up/down/left/right neighbors (default: "coordinate")}

\item{adjacency_threshold}{Distance threshold for considering plots adjacent when using
"coordinate" method (default: 1.5)}

\item{iterations}{Maximum number of iterations for the simulated annealing algorithm (default: 10000)}

\item{early_stop_iterations}{Number of iterations without improvement before early stopping (default: 2000)}

\item{obj_function}{Objective function used to calculate score (lower is better) (default:
\link{objective_function})}

\item{quiet}{Logical; if TRUE, suppresses progress messages (default: FALSE)}

\item{seed}{A numeric value for random seed. If provided, it ensures reproducibility of results (default:
NULL).}
}
\value{
A list containing:
\itemize{
\item design_df - Data frame of optimized design
\item score - Final optimization score
\item adjacency_score - Score for treatment adjacencies
\item balance_score - Score for spatial balance
\item scores - Vector of scores across iterations
\item temperatures - Vector of temperatures across iterations
\item iterations_run - Total number of iterations performed
\item stopped_early - Logical indicating if optimization stopped early
\item treatments - Vector of unique treatments
\item seed - Random seed used for reproducibility of the design
\item adjacency_list - List of adjacent plots used in optimization
}
}
\description{
Optimizes the spatial layout of experimental designs using simulated annealing to minimize
treatment adjacency and maintain treatment balance across spatial factors. Works with
regular or irregular spatial designs.
}
\examples{
# Create a simple design with 3 replicates of 4 treatments in a 4x3 layout
df <- data.frame(
  row = rep(1:4, each = 3),
  col = rep(1:3, times = 4),
  treatment = rep(LETTERS[1:4], 3)
)

# Optimize the design
result <- speed_df(df, swap = "treatment")

}
