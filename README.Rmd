---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# speed - Spatially Efficient Experimental Designs

<!-- badges: start -->
[![Project Status: Active:  The project has reached a stable, usable state and is being actively developed.](https://www.repostatus.org/badges/latest/active.svg)](https://www.repostatus.org/#active)
[![R-CMD-check](https://github.com/biometryhub/speed/actions/workflows/R-CMD-check.yaml/badge.svg)](https://github.com/biometryhub/speed/actions/workflows/R-CMD-check.yaml)
[![Codecov test coverage](https://codecov.io/gh/biometryhub/speed/graph/badge.svg)](https://app.codecov.io/gh/biometryhub/speed)
[![Licence](https://img.shields.io/github/license/mashape/apistatus.svg)](https://choosealicense.com/licenses/mit/)
![Badge](https://hitscounter.dev/api/hit?url=https%3A%2F%2Fbiometryhub.github.io%2Fspeed&label=Hits&icon=arrow-down-circle&color=%23198754)
<!-- badges: end -->


## Overview

The `speed` package optimises spatial experimental designs by rearranging treatments to improve statistical efficiency while maintaining statistical validity. It uses simulated annealing to:

- Minimize treatment adjacency (reducing neighbor effects)
- Maintain spatial balance across rows and columns
- Respect blocking constraints if specified
- Provide visualization tools for design evaluation

## Installation

You can install the development version of speed from [GitHub](https://github.com/biometryhub/speed) with:

```r
# install.packages("pak")
pak::pak("biometryhub/speed")
```

## Features

- Flexible optimization of experimental designs
- Support for blocked designs
- Customizable optimization parameters
- Built-in visualization functions
- Progress tracking during optimization
- Early stopping when convergence is reached

See the package documentation for more detailed examples and options.

## Basic Example

A simple example optimizing a 4Ã—3 completely randomised design with 4 treatments:

```{r example}
library(speed)

# Create a simple design with 3 replicates of 4 treatments
df <- data.frame(
  row = rep(1:4, each = 3),
  col = rep(1:3, times = 4),
  treatment = rep(LETTERS[1:4], each = 3)
)

# Optimise the design with seed for reproducibility
result <- speed(df, "treatment", seed = 42)

# Plot the optimised design
autoplot(result)

# View optimization progress
plot_progress(result)
```

## Blocked design

You can also optimise designs within blocks:

```{r blocks}
# Create a design with blocks
df <- data.frame(
  row = rep(1:6, each = 4),
  col = rep(1:4, times = 6),
  treatment = rep(LETTERS[1:8], 3),
  block = rep(1:3, each = 8)
)

# Optimise while respecting blocks
result <- speed(df, 
                "treatment",
                swap_within = "block",
                iterations = 5000,
                seed = 42)

# Plot the design with block boundaries
autoplot(result)
```

## Citation

If you use `speed` in your research, please cite via:

```{r}
citation("speed")
```

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.
