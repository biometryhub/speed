<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Multi-Environment Trials with speed • speed</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="met_files/libs/quarto-html/popper.min.js"></script><script src="met_files/libs/quarto-html/tippy.umd.min.js"></script><link href="met_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="met_files/libs/quarto-html/light-border.css" rel="stylesheet">
<!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Multi-Environment Trials with speed">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">speed</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/speed.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/complex_designs.html">Complex Agricultural Experimental Designs with speed</a></li>
    <li><a class="dropdown-item" href="../articles/custom_objective_functions.html">Custom Objective Functions and Advanced Options for Optimisation in speed</a></li>
    <li><a class="dropdown-item" href="../articles/met.html">Multi-Environment Trials with speed</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/biometryhub/speed/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-quarto">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Multi-Environment Trials with speed</h1>

      <p class="author">Wasin Pipattungsakul</p>
      <p class="date">2026-01-07</p>

      <small class="dont-index">Source: <a href="https://github.com/biometryhub/speed/blob/main/vignettes/met.qmd" class="external-link"><code>vignettes/met.qmd</code></a></small>
      <div class="d-none name"><code></code></div>
    </div>






    <section class="section level2"><h2 id="met-design">MET Design<a class="anchor" aria-label="anchor" href="#met-design"></a>
</h2>
<section class="level2"><h3 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h3>
<p>Multi-environment trials (MET) are experimental designs used to evaluate the performance of treatments across different environments. An environment typically represents a unique combination of location, year, season, or management practice. MET designs are essential for understanding genotype × environment (G×E) interactions, stability, and adaptability of treatments under different conditions.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://biometryhub.github.io/speed/">speed</a></span><span class="op">)</span></span></code></pre></div>
</div>
</section><section class="level2"><h3 id="when-to-use">When to Use<a class="anchor" aria-label="anchor" href="#when-to-use"></a>
</h3>
<ul>
<li>Treatment evaluation across multiple locations and/or years</li>
<li>Crop breeding and regional recommendation trials</li>
<li>Testing stability and adaptability</li>
<li>When results are intended for large geographic areas</li>
</ul></section><section class="level2"><h3 id="structure">Structure<a class="anchor" aria-label="anchor" href="#structure"></a>
</h3>
<ul>
<li>
<strong>Sites</strong>: Different locations of the trial</li>
<li>
<strong>Site-blocks</strong>: Blocks within sites</li>
</ul></section><section class="level2"><h3 id="setting-up-met-design-with-speed">Setting Up MET Design with speed<a class="anchor" aria-label="anchor" href="#setting-up-met-design-with-speed"></a>
</h3>
<p>Now we can create a data frame representing a MET design. Note that we can specify different dimensions for each site in the <code>designs</code> argument.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">all_treatments</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">50</span>, <span class="fl">7</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">51</span><span class="op">:</span><span class="fl">57</span>, <span class="fl">8</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">met_design</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/initialise_design_df.html">initialise_design_df</a></span><span class="op">(</span></span>
<span>  items <span class="op">=</span> <span class="va">all_treatments</span>,</span>
<span>  designs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    a <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>nrows <span class="op">=</span> <span class="fl">28</span>, ncols <span class="op">=</span> <span class="fl">5</span>, block_nrows <span class="op">=</span> <span class="fl">7</span>, block_ncols <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>,</span>
<span>    b <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>nrows <span class="op">=</span> <span class="fl">20</span>, ncols <span class="op">=</span> <span class="fl">3</span>, block_nrows <span class="op">=</span> <span class="fl">10</span>, block_ncols <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>,</span>
<span>    c <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>nrows <span class="op">=</span> <span class="fl">20</span>, ncols <span class="op">=</span> <span class="fl">4</span>, block_nrows <span class="op">=</span> <span class="fl">10</span>, block_ncols <span class="op">=</span> <span class="fl">4</span><span class="op">)</span>,</span>
<span>    d <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>nrows <span class="op">=</span> <span class="fl">15</span>, ncols <span class="op">=</span> <span class="fl">4</span>, block_nrows <span class="op">=</span> <span class="fl">5</span>, block_ncols <span class="op">=</span> <span class="fl">4</span><span class="op">)</span>,</span>
<span>    e <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>nrows <span class="op">=</span> <span class="fl">22</span>, ncols <span class="op">=</span> <span class="fl">3</span>, block_nrows <span class="op">=</span> <span class="fl">11</span>, block_ncols <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">met_design</span><span class="op">$</span><span class="va">site_col</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">met_design</span><span class="op">$</span><span class="va">site</span>, <span class="va">met_design</span><span class="op">$</span><span class="va">col</span>, sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span></span>
<span><span class="va">met_design</span><span class="op">$</span><span class="va">site_block</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">met_design</span><span class="op">$</span><span class="va">site</span>, <span class="va">met_design</span><span class="op">$</span><span class="va">block</span>, sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">met_design</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  row col treatment row_block col_block block site site_col site_block
1   1   1         1         1         1     1    a      a_1        a_1
2   2   1         2         1         1     1    a      a_1        a_1
3   3   1         3         1         1     1    a      a_1        a_1
4   4   1         4         1         1     1    a      a_1        a_1
5   5   1         5         1         1     1    a      a_1        a_1
6   6   1         6         1         1     1    a      a_1        a_1</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure><p><img src="met_files/figure-html/met-plot1-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
<section class="level3"><h4 id="performing-the-optimisation">Performing the Optimisation<a class="anchor" aria-label="anchor" href="#performing-the-optimisation"></a>
</h4>
<p>For MET designs, we use lists of named arguments to specify the hierarchical structure. The <code>optimise</code> parameter defines what to optimise and constraints at each level.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">optimise</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  connectivity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>spatial_factors <span class="op">=</span> <span class="op">~</span><span class="va">site</span><span class="op">)</span>,</span>
<span>  balance <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>swap_within <span class="op">=</span> <span class="st">"site"</span>, spatial_factors <span class="op">=</span> <span class="op">~</span> <span class="va">site_col</span> <span class="op">+</span> <span class="va">site_block</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">met_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/speed.html">speed</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">met_design</span>,</span>
<span>  swap <span class="op">=</span> <span class="st">"treatment"</span>,</span>
<span>  early_stop_iterations <span class="op">=</span> <span class="fl">5000</span>,</span>
<span>  optimise <span class="op">=</span> <span class="va">optimise</span>,</span>
<span>  optimise_params <span class="op">=</span> <span class="fu"><a href="../reference/optim_params.html">optim_params</a></span><span class="op">(</span>random_initialisation <span class="op">=</span> <span class="cn">TRUE</span>, adj_weight <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">112</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>row and col are used as row and column, respectively.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Optimising level: connectivity
Level: connectivity Iteration: 1000 Score: 2.341479 Best: 2.341479 Since Improvement: 26
Level: connectivity Iteration: 2000 Score: 1.091479 Best: 1.091479 Since Improvement: 38
Level: connectivity Iteration: 3000 Score: 0.877193 Best: 0.877193 Since Improvement: 602
Level: connectivity Iteration: 4000 Score: 0.8057644 Best: 0.8057644 Since Improvement: 211
Level: connectivity Iteration: 5000 Score: 0.7700501 Best: 0.7700501 Since Improvement: 169
Level: connectivity Iteration: 6000 Score: 0.7700501 Best: 0.7700501 Since Improvement: 1169
Level: connectivity Iteration: 7000 Score: 0.7700501 Best: 0.7700501 Since Improvement: 2169
Level: connectivity Iteration: 8000 Score: 0.7700501 Best: 0.7700501 Since Improvement: 3169
Level: connectivity Iteration: 9000 Score: 0.7700501 Best: 0.7700501 Since Improvement: 4169
Early stopping at iteration 9831 for level connectivity
Optimising level: balance
Level: balance Iteration: 1000 Score: 8.926692 Best: 8.926692 Since Improvement: 23
Level: balance Iteration: 2000 Score: 7.74812 Best: 7.74812 Since Improvement: 160
Level: balance Iteration: 3000 Score: 7.605263 Best: 7.605263 Since Improvement: 31
Level: balance Iteration: 4000 Score: 7.533835 Best: 7.533835 Since Improvement: 420
Level: balance Iteration: 5000 Score: 7.49812 Best: 7.49812 Since Improvement: 536
Level: balance Iteration: 6000 Score: 7.49812 Best: 7.49812 Since Improvement: 1536
Level: balance Iteration: 7000 Score: 7.49812 Best: 7.49812 Since Improvement: 2536
Level: balance Iteration: 8000 Score: 7.49812 Best: 7.49812 Since Improvement: 3536
Level: balance Iteration: 9000 Score: 7.49812 Best: 7.49812 Since Improvement: 4536
Early stopping at iteration 9464 for level balance </code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">met_result</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Optimised Experimental Design
----------------------------
Score: 8.26817
Iterations Run: 19297
Stopped Early: TRUE TRUE
Treatments:
  connectivity: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57
  balance: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57
Seed: 112 </code></pre>
</div>
</div>
</section><section class="level3"><h4 id="output-of-the-optimisation">Output of the Optimisation<a class="anchor" aria-label="anchor" href="#output-of-the-optimisation"></a>
</h4>
<p>The output shows optimisation results for the design. The score and iterations are combined for the entire design, while the treatments, and stopping criteria are reported separately for each level, allowing you to assess the quality of optimisation at each hierarchy level.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">met_result</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 8
 $ design_df     :'data.frame': 406 obs. of  9 variables:
  ..$ row       : int [1:406] 1 1 1 1 1 1 1 1 1 1 ...
  ..$ col       : int [1:406] 1 1 1 1 1 2 2 2 2 2 ...
  ..$ treatment : int [1:406] 1 33 3 45 45 49 9 26 9 57 ...
  ..$ row_block : num [1:406] 1 1 1 1 1 1 1 1 1 1 ...
  ..$ col_block : num [1:406] 1 1 1 1 1 1 1 1 1 1 ...
  ..$ block     : Factor w/ 4 levels "1","2","3","4": 1 1 1 1 1 1 1 1 1 1 ...
  ..$ site      : chr [1:406] "a" "b" "c" "d" ...
  ..$ site_col  : chr [1:406] "a_1" "b_1" "c_1" "d_1" ...
  ..$ site_block: chr [1:406] "a_1" "b_1" "c_1" "d_1" ...
 $ score         : num 8.27
 $ scores        :List of 2
  ..$ connectivity: num [1:9832] 5.13 5.2 5.2 5.2 5.2 ...
  ..$ balance     : num [1:9465] 10.3 10.2 10.2 10.3 10.3 ...
 $ temperatures  :List of 2
  ..$ connectivity: num [1:9832] 100 99 98 97 96.1 ...
  ..$ balance     : num [1:9465] 100 99 98 97 96.1 ...
 $ iterations_run: num 19297
 $ stopped_early : Named logi [1:2] TRUE TRUE
  ..- attr(*, "names")= chr [1:2] "connectivity" "balance"
 $ treatments    :List of 2
  ..$ connectivity: chr [1:57] "1" "2" "3" "4" ...
  ..$ balance     : chr [1:57] "1" "2" "3" "4" ...
 $ seed          : num 112
 - attr(*, "class")= chr [1:2] "design" "list"</code></pre>
</div>
</div>
</section><section class="level3"><h4 id="visualise-the-output">Visualise the Output<a class="anchor" aria-label="anchor" href="#visualise-the-output"></a>
</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">met_result</span><span class="op">$</span><span class="va">design_df</span>, <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">col</span>, <span class="va">row</span>, fill <span class="op">=</span> <span class="va">treatment</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html" class="external-link">geom_tile</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_c</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">site</span>, scales <span class="op">=</span> <span class="st">"free"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span>expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>, breaks <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">met_design</span><span class="op">$</span><span class="va">col</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span>expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>, breaks <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">met_design</span><span class="op">$</span><span class="va">row</span><span class="op">)</span>, trans <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/transform_reverse.html" class="external-link">reverse_trans</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span></span>
<span>    legend.position <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>    panel.grid.major <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    panel.grid.minor <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="cell-output-display">
<div>
<figure><p><img src="met_files/figure-html/met-plot2-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
<p>This design has now been optimised at both the connectivity between sites and the balance within each site.</p>
</section></section></section><section class="section level2"><h2 id="spatial-design-considerations">Spatial Design Considerations<a class="anchor" aria-label="anchor" href="#spatial-design-considerations"></a>
</h2>
<section class="level2"><h3 id="field-shape-and-orientation">Field Shape and Orientation<a class="anchor" aria-label="anchor" href="#field-shape-and-orientation"></a>
</h3>
</section><section class="level2"><h3 id="neighbour-effects">Neighbour Effects<a class="anchor" aria-label="anchor" href="#neighbour-effects"></a>
</h3>
</section></section><section class="section level2"><h2 id="using-speed-effectively">Using <code>speed</code> Effectively<a class="anchor" aria-label="anchor" href="#using-speed-effectively"></a>
</h2>
<ol type="1">
<li>
<strong>Set appropriate parameters</strong>: Balance optimisation time with improvement <!-- Link to vignette on parameters -->
</li>
<li>
<strong><a href="autoplot.html">Visualise designs</a></strong>: Always plot layouts before implementation <!-- Link to autoplot -->
</li>
<li>
<strong>Compare alternatives</strong>: Test multiple blocking strategies</li>
<li>
<strong>Validate results</strong>: Check constraint satisfaction and efficiency metrics</li>
</ol></section><section class="section level2"><h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<section class="level2"><h3 id="further-reading">Further Reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h3>
</section></section><section class="section level2"><h2 id="related-vignettes">Related Vignettes<a class="anchor" aria-label="anchor" href="#related-vignettes"></a>
</h2>
<p><em>This vignette demonstrates the versatility of the <code>speed</code> package for agricultural experimental design. For more advanced applications and custom designs, consult the package documentation and additional vignettes.</em></p>
</section><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config);
    }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script></main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sam Rogers, Julian Taylor, Russell Edson, Wasin Pipattungsakul, University of Adelaide, Grains Research and Development Corporation.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
